<div fxLayout="row wrap" fxLayoutAlign="end center" ngClass.xs="mb-3">
  <button mat-raised-button type="button" color="warn" (click)="deleteAddress()" class="mx-1">
    <mat-icon fxHide="false" fxHide.gt-xs="true">delete</mat-icon>
    <span fxShow="false" fxShow.gt-xs="true">Delete Address</span>
  </button>
  <button mat-raised-button type="button" color="primary" (click)="addAddress()">
    <mat-icon fxHide="false" fxHide.gt-xs="true">add</mat-icon>
    <span fxShow="false" fxShow.gt-xs="true">Add New Address</span>
  </button>
</div>
<mat-tab-group [selectedIndex]="selected" (selectedIndexChange)="onTabIndexChanged($event)" animationDuration="0">
  <mat-tab *ngFor="let address of addresses.controls; let i = index">
    <ng-template mat-tab-label>
      <div>
        <span>Dirección de envío</span>
        <span class="mx-2">({{ i + 1 }}) </span>
      </div>
    </ng-template>
    <div class="o-hidden mt-4">
      <div [formGroup]="$any(address)" fxLayout="row wrap" class="flex-wrapper">
        <div fxFlex="100" fxFlex.gt-sm="33.3" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Nombre</mat-label>
            <input matInput placeholder="Nombre" formControlName="firstName" required />
            <mat-error *ngIf="address.get('firstName')!.errors?.required">El nombre es obligatorio</mat-error>
            <mat-error *ngIf="address.get('firstName')!.hasError('maxNumberOfWordsExceeded')">Número máximo de palabras superado</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="33.3" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Apellido</mat-label>
            <input matInput placeholder="Apellido" formControlName="lastName" required />
            <mat-error *ngIf="address.get('lastName')!.errors?.required">Apellido es obligatorio</mat-error>
            <mat-error *ngIf="address.get('lastName')!.hasError('maxNumberOfWordsExceeded')">Número máximo de palabras superado</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="33.3" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Segundo nombre</mat-label>
            <input matInput placeholder="Segundo nombre" formControlName="middleName" />
            <mat-error *ngIf="address.get('middleName')!.hasError('maxNumberOfWordsExceeded')">Número máximo de palabras superado</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="33.3" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Empresa</mat-label>
            <input matInput placeholder="Empresa" formControlName="company" />
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="33.3" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Correo electrónico</mat-label>
            <input matInput placeholder="Introduzca su correo electrónico" formControlName="email" required />
            <mat-error *ngIf="address.get('email')!.errors?.required">El correo electrónico es obligatorio</mat-error>
            <mat-error *ngIf="address.get('email')!.hasError('invalidEmail')">Dirección de correo electrónico no válida</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="33.3" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Teléfono</mat-label>
            <input matInput placeholder="Introduzca su teléfono" formControlName="phone" required />
            <mat-error *ngIf="address.get('phone')!.errors?.required">El teléfono es necesario</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="25" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>País</mat-label>
            <mat-select placeholder="Seleccione el país" formControlName="country" required>
              <mat-option *ngFor="let country of countries" [value]="country.code">
                {{ country.name }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="address.get('country')!.errors?.required">Se requiere el país</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="25" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Ciudad</mat-label>
            <input matInput placeholder="City" formControlName="city" required />
            <mat-error *ngIf="address.get('city')!.errors?.required">La ciudad es necesaria</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="25" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Lugar</mat-label>
            <input matInput placeholder="Place" formControlName="place" required />
            <mat-error *ngIf="address.get('place')!.errors?.required">El lugar es necesario</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-sm="25" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Código postal</mat-label>
            <input matInput placeholder="Código postal" formControlName="postalCode" required />
            <mat-error *ngIf="address.get('postalCode')!.errors?.required">Se requiere el código postal</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" class="px-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Dirección</mat-label>
            <textarea matInput placeholder="Address (street, apartment, suite, unit etc.)" formControlName="address" required rows="5"></textarea>
            <mat-error *ngIf="address.get('address')!.errors?.required">Se requiere la dirección</mat-error>
          </mat-form-field>
        </div>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>

<div class="text-center">
  <button type="button" mat-raised-button color="primary" (click)="save()"><span class="px-3 uppercase">Guardar</span></button>
</div>
