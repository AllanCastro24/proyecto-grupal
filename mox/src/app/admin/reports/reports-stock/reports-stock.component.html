<div class="p-2">
    <mat-card>
        <mat-card-content>
            <form [formGroup]="form" (ngSubmit)="onSubmit()" autocomplete="off" fxLayout="row wrap">
                <div fxFlex="60" class="px-2">
                    <div fxLayout="row wrap">
                        <div fxFlex="100" fxFlex.gt-sm="50" class="px-3">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Buscar por:</mat-label>
                                <mat-select formControlName="buscarPor" [(ngModel)]="optionValue" required>
                                    <!-- <mat-option *ngFor="let cat of appService.Data.categories" [value]="cat.id">
                                        <span>{{cat.name}}</span>
                                    </mat-option> -->
                                    <mat-option value="Consultar">Consultar</mat-option>
                                    <mat-option value="Mes">Mes</mat-option>
                                    <mat-option value="Dia">Dia</mat-option>
                                    <mat-option value="Rango">Rango</mat-option>
                                    <!-- <mat-option value="Ventas por dia">Ventas por dia</mat-option>
                                    <mat-option value="Productos mas vendidos en el mes">Productos mas vendidos en el mes</mat-option>
                                    <mat-option value="Productos menos vendidos en el mes">Productos menos vendidos en el mes</mat-option> -->
                                </mat-select>
                                <mat-error *ngIf="form.controls.buscarPor.errors?.required">Debe seleccionar un tipo
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div fxFlex="100" class="mt-2 text-center w-100" *ngIf="optionValue == 'Consultar'">
                            <button mat-raised-button color="primary" type="submit" class="uppercase">Mostrar</button>
                        </div>

                    </div>
                </div>
            </form>
            <form [formGroup]="form4" (ngSubmit)="onSubmit()" *ngIf="optionValue == 'Mes'" autocomplete="off"
                fxLayout="row wrap">
                <div fxFlex="60" class="px-2">
                    <div fxLayout="row wrap">

                        <div fxFlex="100" fxFlex.gt-sm="50" class="px-3">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Mes</mat-label>
                                <mat-select formControlName="mes">
                                    <!-- <mat-option *ngFor="let cat of appService.Data.categories" [value]="cat.id">
                                        <span>{{cat.name}}</span>
                                    </mat-option> -->
                                    <mat-option value="1">Enero</mat-option>
                                    <mat-option value="2">Febrero</mat-option>
                                    <mat-option value="3">Marzo</mat-option>
                                    <mat-option value="4">Abril</mat-option>
                                    <mat-option value="5">Mayo</mat-option>
                                    <mat-option value="6">Junio</mat-option>
                                    <mat-option value="7">Julio</mat-option>
                                    <mat-option value="8">Agosto</mat-option>
                                    <mat-option value="9">Septiembre</mat-option>
                                    <mat-option value="10">Octubre</mat-option>
                                    <mat-option value="11">Noviembre</mat-option>
                                    <mat-option value="12">Diciembre</mat-option>

                                </mat-select>
                                <!-- <mat-error *ngIf="form.controls.categoryId.errors?.required">Debe seleccionar un tipo
                                </mat-error> -->
                            </mat-form-field>
                        </div>
                        <div fxFlex="100" fxFlex.gt-sm="50" class="px-3">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>AÃ±o</mat-label>
                                <mat-select formControlName="ano">
                                    <mat-option [value]="">-</mat-option>
                                    <mat-option *ngFor="let year of years" [value]="year">
                                        <span>{{year}}</span>
                                    </mat-option>
                                </mat-select>
                                <!-- <mat-error *ngIf="form.controls.categoryId.errors?.required">Debe seleccionar un tipo
                                </mat-error> -->
                            </mat-form-field>
                        </div>
                        <div fxFlex="100" class="mt-2 text-center w-100">
                            <button mat-raised-button color="primary" type="submit" class="uppercase">Mostrar</button>
                        </div>
                    </div>
                </div>
            </form>
            <!-- Form 2 -->
            <form [formGroup]="form2" (ngSubmit)="onSubmit()" *ngIf="optionValue == 'Rango'" autocomplete="off"
                fxLayout="row wrap">
                <div fxFlex="60" class="px-2">
                    <div fxLayout="row wrap">


                        <div fxFlex="200" fxFlex.gt-sm="33.3" class="px-3" ngClass.sm="mt-1" ngClass.xs="mt-1">
                            <!-- <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Fecha inicial</mat-label>
                                <input matInput placeholder="Selecciona una fecha" formControlName="fecha"
                                    [matDatepicker]="fecha" appMaskDate>
                                <mat-datepicker-toggle matSuffix [for]="fecha"></mat-datepicker-toggle>
                                <mat-datepicker #fecha></mat-datepicker>
                                
                            </mat-form-field> -->
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Fecha inicial</mat-label>
                                <input matInput required type="date" formControlName="fecha" class="form-control"
                                    name="" id="" aria-describedby="helpId" placeholder="">
                                <mat-icon matSuffix class="text-muted">date</mat-icon>
                            </mat-form-field>
                        </div> -
                        <div fxFlex="200" fxFlex.gt-sm="33.3" class="px-3" ngClass.sm="mt-1" ngClass.xs="mt-1">
                            <!-- <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Fecha final</mat-label>
                                <input matInput placeholder="Selecciona una fecha" formControlName="fecha2"
                                    [matDatepicker]="fecha2" appMaskDate>
                                <mat-datepicker-toggle matSuffix [for]="fecha2"></mat-datepicker-toggle>
                                <mat-datepicker #fecha2></mat-datepicker>
                                
                            </mat-form-field> -->
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Fecha final</mat-label>
                                <input matInput required type="date" formControlName="fecha2" class="form-control"
                                    name="" id="" aria-describedby="helpId" placeholder="">
                                <mat-icon matSuffix class="text-muted">date</mat-icon>
                            </mat-form-field>
                        </div>
                        <div fxFlex="100" class="mt-2 text-center w-100">
                            <button mat-raised-button color="primary" type="submit" class="uppercase">Mostrar</button>
                        </div>
                    </div>
                </div>
            </form>
            <!-- FORM 3 -->
            <form [formGroup]="form3" (ngSubmit)="onSubmit()" *ngIf="optionValue == 'Dia'" autocomplete="off"
                fxLayout="row wrap">
                <div fxFlex="60" class="px-2">
                    <div fxLayout="row wrap">
                        <div fxFlex="100" fxFlex.gt-sm="33.3" class="px-3" ngClass.sm="mt-1" ngClass.xs="mt-1">
                            <!-- <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Dia</mat-label>
                                <input matInput placeholder="Selecciona un dia" formControlName="dia"
                                    [matDatepicker]="dia" appMaskDate>
                                <mat-datepicker-toggle matSuffix [for]="dia"></mat-datepicker-toggle>
                                <mat-datepicker #dia></mat-datepicker>
                                
                            </mat-form-field> -->
                            <mat-form-field appearance="outline" class="w-200">
                                <mat-label>Dia</mat-label>
                                <input matInput required type="date" formControlName="dia" class="form-control" name=""
                                    id="" aria-describedby="helpId" placeholder="">
                                <mat-icon matSuffix class="text-muted">date</mat-icon>
                            </mat-form-field>

                            <!-- <input matInput required type="date" formControlName="dia" class="form-control" name="" id=""
                                aria-describedby="helpId" placeholder=""> -->
                        </div>
                        <div fxFlex="100" class="mt-2 text-center w-100">
                            <button mat-raised-button color="primary" type="submit" class="uppercase">Mostrar</button>
                        </div>
                    </div>
                </div>
            </form>
            <div class="table-wrapper">
                <table mat-table [dataSource]="dataSource" matSort class="w-100">

                    <!-- FullName Column -->
                    <ng-container matColumnDef="id_detalle_insumo">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Detalle del insumo </th>
                        <td mat-cell *matCellDef="let customer">{{customer.id_detalle_insumo}}</td>
                    </ng-container>


                    <!-- Revenue Column -->
                    <ng-container matColumnDef="id_sucursal">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Sucursal </th>
                        <td mat-cell *matCellDef="let customer">{{customer.nom_sucursal}} </td>
                    </ng-container>

                    <ng-container matColumnDef="Detalles">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Detalles </th>
                        <td mat-cell *matCellDef="let customer">{{customer.detalles}}</td>
                    </ng-container>

                    <ng-container matColumnDef="cantidad">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Cantidad </th>
                        <td mat-cell *matCellDef="let customer">{{customer.cantidad | currency : 'USD' : 'symbol' :
                            '1.2-2'}} </td>
                    </ng-container>
                    <!-- Actions Column -->
                    <!-- <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef> Actions </th>
                        <td mat-cell *matCellDef="let customer"> 
                            <button mat-icon-button color="primary" (click)="openFixedCostsDialog(customer)" matTooltip="Edit">
                                <mat-icon>edit</mat-icon>
                            </button> 
                            <button mat-icon-button color="warn" (click)="remove(customer)" matTooltip="Remove">
                                <mat-icon>delete</mat-icon>
                            </button>  
                        </td>
                    </ng-container>  -->

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let customer; columns: displayedColumns;"></tr>
                </table>
                <p *ngIf="dataSource && dataSource.data.length === 0" class="py-5 mb-0 text-center">No data available
                </p>
            </div>
            <mat-card>
                <mat-card-header fxLayoutAlign="center">
                    <mat-card-subtitle>
                        <h2>Almacen</h2>
                    </mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <div fxLayout="row" fxLayoutAlign="space-around">
                        <mat-checkbox color="primary" class="example-margin" [checked]="explodeSlices"
                            (change)="explodeSlices = !explodeSlices">Explotar rebanadas</mat-checkbox>
                        <mat-checkbox color="primary" class="example-margin" [checked]="showLabels"
                            (change)="showLabels = !showLabels">Mostrar etiquetas</mat-checkbox>
                    </div>
                    <div class="w-100 h-300p" #resizedDiv>
                        <ngx-charts-pie-chart [scheme]="colorScheme" [results]="data" [legend]="showLegend"
                            [explodeSlices]="explodeSlices" [labels]="showLabels" [doughnut]="doughnut"
                            [gradient]="gradient" (select)="onSelect($event)">
                        </ngx-charts-pie-chart>
                    </div>
                </mat-card-content>
            </mat-card>
        </mat-card-content>
    </mat-card>
</div>